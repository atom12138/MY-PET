(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"0e89":function(t,e,a){"use strict";a.r(e);var n=a("f85b"),r=a("86cf");for(var s in r)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(s);a("7c68"),a("91af");var o=a("828b"),i=Object(o["a"])(r["default"],n["b"],n["c"],!1,null,"312fdbba",null,!1,n["a"],void 0);e["default"]=i.exports},1901:function(t,e,a){"use strict";(function(t,e){var n=a("47a9");a("35f8");n(a("3240"));var r=n(a("0e89"));t.__webpack_require_UNI_MP_PLUGIN__=a,e(r.default)}).call(this,a("3223")["default"],a("df3c")["createPage"])},"7c68":function(t,e,a){"use strict";var n=a("b390"),r=a.n(n);r.a},"81c6":function(t,e,a){"use strict";(function(t){var n=a("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(a("7eb4")),s=n(a("ee10")),o=n(a("4bbf")),i={data:function(){return{bgUrl:"",username:"",password:"",codes:[{num:1,color:"#000",rotate:"10deg",size:"16px"},{num:2,color:"#000",rotate:"10deg",size:"16px"},{num:3,color:"#000",rotate:"10deg",size:"16px"},{num:4,color:"#000",rotate:"10deg",size:"16px"}],options:[],optionsValues:[],index:0,roleNum:0,showPassword:!1,avatarUrl:"",defaultAvatarUrl:"",avatarTimer:null,lastRoleTable:""}},onLoad:function(){var e=[],a=o.default.list();this.menuList=a,this.optionsValues=[];for(var n=0;n<this.menuList.length;n++)"是"==this.menuList[n].hasFrontLogin&&(e.push(this.menuList[n].roleName),"用户"===this.menuList[n].roleName?this.optionsValues.push("yonghu"):"宠物店"===this.menuList[n].roleName?this.optionsValues.push("shangjia"):"医生"===this.menuList[n].roleName?this.optionsValues.push("doctor"):this.optionsValues.push(this.menuList[n].tableName||""),this.roleNum++);if(this.roleNum>=1){var r=t.getStorageSync("lastRoleTable")||t.getStorageSync("nowTable");if(r){var s=this.optionsValues.indexOf(r);-1!==s?(this.index=s,this.lastRoleTable=r):this.index=0}else this.index=0}this.options=e,this.randomString(4),this.styleChange(),this.bgUrl=this.$base.url+"upload/bg.jpg",this.defaultAvatarUrl=this.$base.url+"upload/logo.jpg",this.$set(this,"avatarUrl",this.defaultAvatarUrl)},methods:{randomString:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"],a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=["28","30","32","34","36"],r=0;r<t;r++){var s=Math.floor(Math.random()*e.length);this.codes[r].num=e[s];for(var o="#",i=0;i<6;i++){var u=Math.floor(Math.random()*a.length);o+=a[u]}this.codes[r].color=o;var l=Math.floor(30*Math.random()),c=Math.floor(2*Math.random());1==c&&(l="-"+l),this.codes[r].rotate="rotate("+l+"deg)";var d=Math.floor(Math.random()*n.length);this.codes[r].size=n[d]+"rpx"}},styleChange:function(){this.$nextTick((function(){}))},onRegisterTap:function(e){t.setStorageSync("loginTable",e),this.$utils.jump("../register/register")},onForgetTap:function(){this.$utils.jump("../forget/forget")},onLoginTap:function(){var e=this;return(0,s.default)(r.default.mark((function a(){var n;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.optionsValues&&e.optionsValues[e.index]){a.next=3;break}return e.$utils.msg("没有可用的用户类型"),a.abrupt("return");case 3:return a.next=5,e.$api.login("".concat(e.optionsValues[e.index]),{username:e.username,password:e.password});case 5:return n=a.sent,t.removeStorageSync("useridTag"),t.setStorageSync("token",n.token),t.setStorageSync("nickname",e.username),t.setStorageSync("nowTable","".concat(e.optionsValues[e.index])),a.next=12,e.$api.session("".concat(e.optionsValues[e.index]));case 12:n=a.sent,t.setStorageSync("userid",n.data.id),n.data.vip&&t.setStorageSync("vip",n.data.vip),t.setStorageSync("role","".concat(e.options[e.index])),t.setStorageSync("lastRoleTable",e.optionsValues[e.index]),t.setStorageSync("lastRole",e.options[e.index]),e.lastRoleTable=e.optionsValues[e.index],e.$utils.tab("../index/index");case 20:case"end":return a.stop()}}),a)})))()},optionsChange:function(e){this.index=e.target.value;var a=this.optionsValues[this.index];this.lastRoleTable&&this.lastRoleTable!==a&&this.clearAuthCache(),t.setStorageSync("lastRoleTable",a),t.setStorageSync("lastRole",this.options[this.index]),this.lastRoleTable=a,this.onUserTypeChange()},togglePassword:function(){this.showPassword=!this.showPassword},onUsernameInput:function(){var t=this;return(0,s.default)(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.avatarTimer&&clearTimeout(t.avatarTimer),t.avatarUrl=t.defaultAvatarUrl,t.avatarTimer=setTimeout((0,s.default)(r.default.mark((function e(){var a,n,s,o,i,u,l,c;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.username||!t.username.trim()){e.next=15;break}if(e.prev=1,a=t.optionsValues[t.index],!a){e.next=10;break}return n={},"yonghu"===a?n.zhanghao=t.username.trim():"shangjia"===a?n.shangjiazhanghao=t.username.trim():"doctor"===a&&(n.doctorzhanghao=t.username.trim()),e.next=8,t.$api.list(a,n);case 8:s=e.sent,"doctor"===a?s.data&&s.data.length>0&&(o=s.data[0].touxiang,o?(i=t.$base.url+o,t.$set(t,"avatarUrl",i)):t.$set(t,"avatarUrl",t.defaultAvatarUrl)):s.data&&s.data.list&&s.data.list.length>0&&(u=s.data.list[0],l="","yonghu"===a?l=u.zhaopian:"shangjia"===a&&(l=u.touxiang),l?(c=t.$base.url+l,t.$set(t,"avatarUrl",c)):t.$set(t,"avatarUrl",t.defaultAvatarUrl));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),t.avatarUrl=t.defaultAvatarUrl;case 15:case"end":return e.stop()}}),e,null,[[1,12]])}))),500);case 3:case"end":return e.stop()}}),e)})))()},onUserTypeChange:function(){var t=this;return(0,s.default)(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.username||!t.username.trim()){e.next=5;break}return e.next=3,t.onUsernameInput();case 3:e.next=6;break;case 5:t.avatarUrl=t.defaultAvatarUrl;case 6:case"end":return e.stop()}}),e)})))()},clearAuthCache:function(){try{t.clearStorageSync()}catch(e){}}}};e.default=i}).call(this,a("df3c")["default"])},"86cf":function(t,e,a){"use strict";a.r(e);var n=a("81c6"),r=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=r.a},"91af":function(t,e,a){"use strict";var n=a("d6c2"),r=a.n(n);r.a},b390:function(t,e,a){},d6c2:function(t,e,a){},f85b:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var n=function(){var t=this.$createElement;this._self._c},r=[]}},[["1901","common/runtime","common/vendor"]]]);